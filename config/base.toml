# Changple AI - Base Configuration
# Shared settings across all environments
# Secrets (API keys, passwords) go in .env, NOT here

[project]
name = "changple"
version = "3.0.0"

# =============================================================================
# Service Ports
# =============================================================================
[ports]
core = 8000
agent = 8001
client = 3000
postgres = 5432
redis = 6379

# =============================================================================
# Database
# =============================================================================
[database]
name = "changple"
langgraph_name = "changple_langgraph"
host = "postgres"  # Docker service name

[database.pool]
min_size = 2
max_size = 20
timeout = 300

# =============================================================================
# Redis
# =============================================================================
[redis]
host = "redis"
port = 6379
db = 0
agent_db = 1  # Separate DB for agent service

# =============================================================================
# AI Models
# =============================================================================
[ai.llm]
default_model = "gemini-2.5-flash"
temperature = 0

[ai.embedding]
model = "text-embedding-3-large"
chunk_size = 200

[ai.pinecone]
index_name = "changple-index"
environment = "us-east-1"

# =============================================================================
# Core Service (Django)
# =============================================================================
[core]
allowed_hosts = ["localhost", "127.0.0.1"]
csrf_trusted_origins = []
cors_allowed_origins = []

[core.celery]
broker_db = 0
result_db = 0

# =============================================================================
# Agent Service (FastAPI)
# =============================================================================
[agent]
# Timeout settings
request_timeout = 30
websocket_timeout = 300

# Stop generation flag TTL
stop_flag_ttl = 300

# Cache TTL for Core API responses (seconds)
cache_ttl = 300

# =============================================================================
# Client Service (Next.js)
# =============================================================================
[client]
# API URLs (relative to nginx in prod, direct in dev)
api_url = "/api/v1"
ws_url = "/ws"
